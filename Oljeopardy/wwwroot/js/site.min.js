function MoveAnswerQuestion(position,direction){var thisQuestionId="q".concat(position),thisAnswerId="a".concat(position),targetQuestionId="q".concat("up"===direction?position-1:position+1),targetAnswerId="a".concat("up"===direction?position-1:position+1),thisQuestion=document.getElementById(thisQuestionId),thisQuestionValue=thisQuestion.value,thisAnswer=document.getElementById(thisAnswerId),thisAnswerValue=thisAnswer.value,targetQuestion=document.getElementById(targetQuestionId),targetQuestionValue=targetQuestion.value,targetAnswer=document.getElementById(targetAnswerId),targetAnswerValue=targetAnswer.value;thisQuestion.value=targetQuestionValue,thisAnswer.value=targetAnswerValue,targetQuestion.value=thisQuestionValue,targetAnswer.value=thisAnswerValue}function addSpinner(button){button.classList.add("active")}function removeSpinner(button){button.classList.remove("active")}function checkIfGameChanged(){var gameId="";if($.ajax({url:"/getGameId",async:!1,dataType:"text",success:function(data){gameId=data}}),""!==gameId){var connection=(new signalR.HubConnectionBuilder).withUrl("/gameUpdate").configureLogging(signalR.LogLevel.Information).build();connection.on("gameUpdated",function(data){connection.stop(),gameBottomMargin=$("#gameBottomMargin"),gameBottomMargin.length&&gameBottomMargin.length>0&&loadGame()}),connection.onclose(function(){loadGame()}),connection.start().then(function(){connection.invoke("joinGroup",gameId)})}return gameId}function selectAnswerQuestion(elem){var labels=document.getElementsByClassName("category-radio-button-label");for(i=0;i<labels.length;i++)labels[i].classList.remove("selected");elem.classList.add("selected")}$(document).on("click",".navbar-collapse.in",function(e){$(e.target).is("a")&&$(this).collapse("hide")}),$(document).ready(function(){$(document).click(function(event){var clickover=$(event.target),_opened;!0!==$(".navbar-collapse").hasClass("navbar-collapse collapse in")||clickover.hasClass("navbar-toggle")||$("button.navbar-toggle").click()})});var loadRules=function(){$("#master-container").load("/Home/Rules")},loadCategories=function(){$("#master-container").load("/Home/Categories")},loadCategoriesAdded=function(){$("#master-container").load("/Home/Categories?pageAction=AddedCategory")},loadCategoriesEdited=function(){$("#master-container").load("/Home/Categories?pageAction=EditedCategory")},loadCategoriesDeleted=function(){$("#master-container").load("/Home/Categories?pageAction=DeletedCategory")},loadGame=function(){var gameId;""===checkIfGameChanged()?$("#master-container").load("/Home/Main"):$("#master-container").load("/Home/Game")},loadMain=function(){$("#master-container").load("/Home/Main")},loadAddGame=function(){$("#master-container").load("/Game/Add")},loadCreateCategory=function(){$("#master-container").load("/Category/Create")},loadParticipateGame=function(){$("#master-container").load("/Game/Participate")},submitCategory=function(){var name=$("#Name")[0].value,form=$("#categoryForm"),id=$("#Id")[0].value;if(null===name||""==$.trim(name))return alert("Du skal navngive din kategori"),!1;$.ajax({url:"/Category/SubmitCategory",data:form.serialize(),async:!1}),""===id?loadCategoriesAdded():loadCategoriesEdited()},editCategory=function(categoryId){$.post("/Category/Edit",{chosenCategoryGuid:categoryId}).done(function(data){$("#master-container").html(data)})},deleteCategory=function(categoryId){var r;!0===confirm("Kategorien slettes og kan ikke gendannes!")&&$.ajax({url:"/Category/Delete",type:"post",data:{chosenCategoryGuid:categoryId},async:!1}).done(function(data){data&&loadCategoriesDeleted()})},completeAddGame=function(){var form=$("#addGameForm"),selectedIndex;if(0===form[0][0].selectedIndex)return alert("Vælg en kategori, du vil bruge i spillet"),!1;$.ajax({url:"/Game/Completeadd",data:form.serialize(),async:!1}),loadGame()},completeParticipation=function(){var form=$("#completeParticipationForm"),selectedIndex=form[0][0].selectedIndex,selectedGameIndex,selectedCategoryIndex;return 0===form[0][0].selectedIndex?(alert("Vælg et spil, du vil deltage i"),!1):0===form[0][1].selectedIndex?(alert("Vælg en kategori, du vil bruge i spillet"),!1):($.ajax({url:"/Game/CompleteParticipation",data:form.serialize(),async:!1}),void loadGame())},selectWinner=function(winnerId,gameId,button){addSpinner(button),$.ajax({url:"/Game/SelectWinner",type:"post",data:{ChosenWinnerId:winnerId,Game:{Id:gameId}},async:!1}),loadGame()},selectAnswer=function(button,chosenAnswerQuestionId,gameId){null!=button&&addSpinner(button),$.ajax({url:"/Game/SelectAnswer",data:{ChosenAnswerQuestionGuid:chosenAnswerQuestionId,GameId:gameId},async:!1}),loadGame()},eatYourNote=function(button){if(promptAnswer=confirm("Bekræft, at ingen kunne gætte spørgsmålet."),!promptAnswer)return!1;null!=button&&addSpinner(button),$.ajax({url:"/Game/EatYourNote",type:"post",success:function(){loadGame()}})},leaveGame=function(button){if(promptAnswer=confirm("Bekræft, at du vil forlade det aktuelle spil."),!promptAnswer)return!1;null!=button&&addSpinner(button),$.ajax({url:"/Game/LeaveGame",type:"post",success:function(){loadMain()},error:function(){removeSpinner(button),alert("Du kan ikke forlade spillet, når det er din tur til at gøre noget.")}})};